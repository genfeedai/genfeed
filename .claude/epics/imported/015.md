---
name: "Workflow Cost Tracking & Analytics"
status: open
created: 2026-02-23T19:08:03Z
updated: 2026-02-25T21:03:21Z
github: https://github.com/genfeedai/core/issues/21
imported: true
labels:
  - enhancement
---

## Summary

Track estimated vs actual costs per execution with model-specific pricing. Implement cost tracking and analytics for workflow executions, providing cost breakdown per node/job.

## Key Deliverables

- Cost estimation before execution
- Real-time cost tracking during execution
- Cost breakdown per node/job
- Historical cost analytics
- Model-specific pricing configuration

## API Endpoints

| Endpoint | Description |
|----------|-------------|
| GET /workflows/:id/cost-estimate | Pre-execution cost estimate with breakdown |
| GET /executions/:id/costs | Actual costs with job-level breakdown |

## Model Pricing (Jan 2026)

| Model | Type | Price |
|-------|------|-------|
| nano-banana | Image | $0.039/image |
| nano-banana-pro | Image | $0.15/image (1K/2K), $0.30/image (4K) |
| veo-3.1-fast | Video | $0.10/sec (no audio), $0.15/sec (with audio) |
| veo-3.1 | Video | $0.20/sec (no audio), $0.40/sec (with audio) |
| llama | LLM | $9.50/M tokens |

## Files

- `apps/api/src/cost/cost-calculator.service.ts` - Model pricing and cost calculation
- `apps/api/src/cost/cost.module.ts` - NestJS module
- `apps/api/src/cost/interfaces/cost.interface.ts` - TypeScript interfaces
- Modified schemas: `job.schema.ts`, `execution.schema.ts`
- Modified services: `executions.service.ts`, `replicate.service.ts`
- Modified controllers: `workflows.controller.ts`, `executions.controller.ts`

## Phase 2 (Future)

- CostHistory schema for daily aggregations
- Organization-level cost tracking
- GET /analytics/costs endpoint
- Frontend cost visualization dashboard

## Reference

Inspired by [node-banana](https://github.com/VincentShipsIt/node-banana)
